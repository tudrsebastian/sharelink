import{s as de,v as ae,r as ne,g as _,c as E,l as M,h as g,z as K,d as S,i as j,m as z,k as v,C as oe}from"../chunks/scheduler.1005fe53.js";import{S as _e,i as ge,d as G,v as ve,j as be,k as we,m as Re,b as Ce,t as Ue,l as ye,e as c,g as l,a as C,n as R,p as Pe}from"../chunks/index.9d1d7535.js";import{A as pe}from"../chunks/AuthCheck.3770d72f.js";import{b as V,u as J,d as le,e as re,f as ie,g as ce,h as ue,r as fe,i as me}from"../chunks/firebase.b7e54b21.js";const b="G:/PersonalProjects/myapp/src/routes/login/photo/+page.svelte";function Q(r){let e,i="Uploading...",f,o;const t={c:function(){e=_("p"),e.textContent=i,f=E(),o=_("progress"),this.h()},l:function(u){e=g(u,"P",{"data-svelte-h":!0}),K(e)!=="svelte-be0b5h"&&(e.textContent=i),f=S(u),o=g(u,"PROGRESS",{class:!0}),j(o).forEach(c),this.h()},h:function(){v(e,b,47,8,1509),l(o,"class","progress progress-info w-56 mt-6"),v(o,b,48,8,1538)},m:function(u,P){C(u,e,P),C(u,f,P),C(u,o,P)},d:function(u){u&&(c(e),c(f),c(o))}};return G("SvelteRegisterBlock",{block:t,id:Q.name,type:"if",source:"(45:6) {#if uploading}",ctx:r}),t}function he(r){let e,i="Upload a Profile Photo",f,o,t,a,u,P,d,h,B="Pick a file",O,n,x,A,w,D,N,y,I,F,k,L,T,q,X,p=r[2]&&Q(r);const Y={c:function(){e=_("h2"),e.textContent=i,f=E(),o=_("form"),t=_("div"),a=_("img"),P=E(),d=_("label"),h=_("span"),h.textContent=B,O=E(),n=_("input"),x=E(),p&&p.c(),A=E(),w=_("a"),D=M("Finish"),N=E(),y=_("a"),I=M("Continue without photo"),F=E(),k=_("button"),L=_("a"),T=M("Previous Step"),this.h()},l:function(s){e=g(s,"H2",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1whglfv"&&(e.textContent=i),f=S(s),o=g(s,"FORM",{class:!0});var m=j(o);t=g(m,"DIV",{class:!0});var U=j(t);a=g(U,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),P=S(U),d=g(U,"LABEL",{for:!0,class:!0});var Z=j(d);h=g(Z,"SPAN",{class:!0,"data-svelte-h":!0}),K(h)!=="svelte-1xba4c3"&&(h.textContent=B),Z.forEach(c),O=S(U),n=g(U,"INPUT",{name:!0,type:!0,class:!0,accept:!0}),x=S(U),p&&p.l(U),U.forEach(c),m.forEach(c),A=S(s),w=g(s,"A",{href:!0,class:!0});var $=j(w);D=z($,"Finish"),$.forEach(c),N=S(s),y=g(s,"A",{href:!0,class:!0});var ee=j(y);I=z(ee,"Continue without photo"),ee.forEach(c),F=S(s),k=g(s,"BUTTON",{class:!0});var te=j(k);L=g(te,"A",{href:!0});var se=j(L);T=z(se,"Previous Step"),se.forEach(c),te.forEach(c),this.h()},h:function(){var s;l(e,"class","card-title"),v(e,b,25,2,793),oe(a.src,u=r[1]??((s=r[0])==null?void 0:s.photoURL)??"/user.png")||l(a,"src",u),l(a,"alt","photoURL"),l(a,"width","256"),l(a,"height","256"),l(a,"class","mx-auto"),v(a,b,29,6,968),l(h,"class","label-text"),v(h,b,37,8,1192),l(d,"for","photoURL"),l(d,"class","label"),v(d,b,36,6,1146),l(n,"name","photoURL"),l(n,"type","file"),l(n,"class","file-input file-input-bordered w-full max-w-xs"),l(n,"accept","image/png, image/jpeg, image/gif, image/webp"),v(n,b,39,6,1259),l(t,"class","form-control w-full max-w-xs my-10 mx-auto text-center"),v(t,b,28,4,892),l(o,"class","max-w-screen-md w-full"),v(o,b,27,2,849),l(w,"href",r[4]),l(w,"class","btn btn-primary"),v(w,b,53,2,1633),l(y,"href",r[4]),l(y,"class","btn btn-primary"),v(y,b,54,2,1683),l(L,"href",r[3]),v(L,b,56,5,1787),l(k,"class","btn btn-primary"),v(k,b,55,2,1749)},m:function(s,m){C(s,e,m),C(s,f,m),C(s,o,m),R(o,t),R(t,a),R(t,P),R(t,d),R(d,h),R(t,O),R(t,n),R(t,x),p&&p.m(t,null),C(s,A,m),C(s,w,m),R(w,D),C(s,N,m),C(s,y,m),R(y,I),C(s,F,m),C(s,k,m),R(k,L),R(L,T),q||(X=Pe(n,"change",r[5],!1,!1,!1,!1),q=!0)},p:function(s,m){var U;m&3&&!oe(a.src,u=s[1]??((U=s[0])==null?void 0:U.photoURL)??"/user.png")&&l(a,"src",u),s[2]?p||(p=Q(s),p.c(),p.m(t,null)):p&&(p.d(1),p=null),m&16&&l(w,"href",s[4]),m&16&&l(y,"href",s[4]),m&8&&l(L,"href",s[3])},d:function(s){s&&(c(e),c(f),c(o),c(A),c(w),c(N),c(y),c(F),c(k)),p&&p.d(),q=!1,X()}};return G("SvelteRegisterBlock",{block:Y,id:he.name,type:"slot",source:"(23:0) <AuthCheck>",ctx:r}),Y}function W(r){let e,i;e=new pe({props:{$$slots:{default:[he]},$$scope:{ctx:r}},$$inline:!0});const f={c:function(){be(e.$$.fragment)},l:function(t){we(e.$$.fragment,t)},m:function(t,a){Re(e,t,a),i=!0},p:function(t,[a]){const u={};a&159&&(u.$$scope={dirty:a,ctx:t}),e.$set(u)},i:function(t){i||(Ce(e.$$.fragment,t),i=!0)},o:function(t){Ue(e.$$.fragment,t),i=!1},d:function(t){ye(e,t)}};return G("SvelteRegisterBlock",{block:f,id:W.name,type:"component",source:"",ctx:r}),f}function ke(r,e,i){let f,o,t,a;ae(V,"user"),ne(r,V,n=>i(6,t=n)),ae(J,"userData"),ne(r,J,n=>i(0,a=n));let{$$slots:u={},$$scope:P}=e;ve("Page",u,[]);let d,h=!1;async function B(n){i(2,h=!0);const x=n.target.files[0];i(1,d=URL.createObjectURL(x));const A=fe(le,`users/${t.uid}/profile.png`),w=await me(A,x),D=await ue(w.ref);await ce(ie(re,"users",t.uid),{photoURL:D}),i(2,h=!1)}const O=[];return Object.keys(e).forEach(n=>{!~O.indexOf(n)&&n.slice(0,2)!=="$$"&&n!=="slot"&&console.warn(`<Page> was created with unknown prop '${n}'`)}),r.$capture_state=()=>({AuthCheck:pe,user:V,userData:J,storage:le,db:re,doc:ie,updateDoc:ce,getDownloadURL:ue,ref:fe,uploadBytes:me,previewURL:d,uploading:h,upload:B,previousHref:o,href:f,$user:t,$userData:a}),r.$inject_state=n=>{"previewURL"in n&&i(1,d=n.previewURL),"uploading"in n&&i(2,h=n.uploading),"previousHref"in n&&i(3,o=n.previousHref),"href"in n&&i(4,f=n.href)},e&&"$$inject"in e&&r.$inject_state(e.$$inject),r.$$.update=()=>{r.$$.dirty&1&&i(4,f=`/${a==null?void 0:a.username}/edit`)},i(3,o="/login/username"),[a,d,h,o,f,B]}class xe extends _e{constructor(e){super(e),ge(this,e,ke,W,de,{}),G("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:W.name})}}export{xe as component};
